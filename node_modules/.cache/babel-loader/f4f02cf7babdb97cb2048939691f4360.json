{"ast":null,"code":"import auth from \"../api/authentication\";\nimport * as errorMessages from '../constants/MessageConstants';\nimport history from '../history';\nimport jwt_decode from 'jwt-decode'; //LOGIN\n\nexport var REQUEST_LOGIN = 'REQUEST_LOGIN';\nexport var RECEIVE_LOGIN = 'RECEIVE_LOGIN';\nexport var ERROR_LOGIN = \"ERROR_LOGIN\";\nexport var CHANGE_LOGIN = \"CHANGE_LOGIN\";\nexport var CHANGE_USER = \"CHANGE_USER\";\nexport var RESET_LOGIN = 'RESET_LOGIN';\nexport var LOGOUT_SUCCESS = 'LOGOUT_SUCCESS';\nexport var LOGOUT_REQUEST = 'LOGOUT_REQUEST';\nexport function login(usuario) {\n  return function (dispatch) {\n    dispatch(sendingRequest(true)); // If no username or password was specified, throw a field-missing error\n\n    if (anyElementsEmpty(usuario)) {\n      dispatch(sendingRequest(false));\n      dispatch(errorLogin(\"Completa los campos\"));\n      return;\n    }\n\n    auth.login(usuario, function (success, error) {\n      // When the request is finished, hide the loading indicator\n      //dispatch(sendingRequest(false));\n      if (success === true) {\n        dispatch(receiveLogin(success)); //guardo usuario logueado\n\n        var datos = jwt_decode(localStorage.token);\n        dispatch(changeUser(datos.nombreUsuario)); // If the login worked, forward the user to the dashboard and clear the form\n\n        dispatch(changeLogin({\n          nombreUsuario: \"\",\n          password: \"\"\n        }));\n        history.push(\"/jugadores\");\n      } else {\n        switch (error.status) {\n          case 401:\n            dispatch(errorLogin(errorMessages.UNAUTHORIZED_TOKEN));\n            dispatch(logout());\n            return;\n\n          default:\n            try {\n              error.json().then(function (error) {\n                if (error.message != \"\") dispatch(errorLogin(error.message));else dispatch(errorLogin(errorMessages.GENERAL_ERROR));\n              }).catch(function (error) {\n                dispatch(errorLogin(errorMessages.GENERAL_ERROR));\n              });\n            } catch (e) {}\n\n            return;\n        }\n      } // });\n\n    });\n  };\n}\n\nfunction requestLogout() {\n  return {\n    type: LOGOUT_REQUEST,\n    isFetching: true,\n    isAuthenticated: true\n  };\n}\n\nexport function receiveLogout() {\n  return {\n    type: LOGOUT_SUCCESS,\n    isFetching: false,\n    isAuthenticated: false\n  };\n}\nexport function logout() {\n  return function (dispatch) {\n    dispatch(requestLogout()); //dispatch(resetCreateUsuario());\n    //dispatch(resetUpdateUsuarioLogueado());\n\n    localStorage.removeItem('token');\n    document.cookie = 'id_token=;expires=Thu, 01 Jan 1970 00:00:01 GMT;';\n    dispatch(receiveLogout());\n    window.location.reload;\n  };\n}\nexport function sendingRequest(sending) {\n  return {\n    type: REQUEST_LOGIN,\n    sending: sending\n  };\n}\nexport function receiveLogin(token) {\n  return {\n    type: RECEIVE_LOGIN,\n    token: token\n  };\n}\nexport function changeLogin(usuario) {\n  return {\n    type: CHANGE_LOGIN,\n    usuario: usuario\n  };\n}\nexport function changeUser(nombreUsuario) {\n  return {\n    type: CHANGE_USER,\n    nombreUsuario: nombreUsuario\n  };\n}\nexport function resetLogin() {\n  return {\n    type: RESET_LOGIN\n  };\n}\n\nfunction errorLogin(error) {\n  return {\n    type: ERROR_LOGIN,\n    error: error\n  };\n}\n\nfunction anyElementsEmpty(elements) {\n  for (var element in elements) {\n    if (!elements[element]) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\nexport function olvideMiPassword(usuario) {\n  return function (dispatch) {\n    dispatch(sendingRequest(true)); // If no username or password was specified, throw a field-missing error\n\n    if (usuario == \"\") {\n      dispatch(sendingRequest(false));\n      dispatch(errorLogin(\"Debe ingresar su usuario para iniciar el proceso de recuperación.\"));\n      return;\n    }\n\n    auth.olvideMiPassword(usuario, function (success, error) {\n      // When the request is finished, hide the loading indicator\n      if (success === true) {\n        dispatch(sendingRequest(false));\n      } else {\n        switch (error.status) {\n          case 401:\n            dispatch(errorLogin(errorMessages.UNAUTHORIZED_TOKEN));\n            dispatch(logout());\n            return;\n\n          default:\n            try {\n              error.json().then(function (error) {\n                if (error.message != \"\") dispatch(errorLogin(error.message));else dispatch(errorLogin(errorMessages.GENERAL_ERROR));\n              }).catch(function (error) {\n                dispatch(errorLogin(errorMessages.GENERAL_ERROR));\n              });\n            } catch (e) {}\n\n            return;\n        }\n      } // });\n\n    });\n  };\n}\nexport function resetPassword(usuario) {\n  return function (dispatch) {\n    dispatch(sendingRequest(true));\n    auth.resetPassword(usuario, function (success, error) {\n      // When the request is finished, hide the loading indicator\n      dispatch(sendingRequest(false));\n\n      if (success === true) {\n        history.replace('/login', null);\n      } else {\n        switch (error.status) {\n          case 401:\n            dispatch(errorLogin(errorMessages.UNAUTHORIZED_TOKEN));\n            dispatch(logout());\n            return;\n\n          default:\n            try {\n              error.json().then(function (error) {\n                if (error.message != \"\") dispatch(errorLogin(error.message));else dispatch(errorLogin(errorMessages.GENERAL_ERROR));\n              }).catch(function (error) {\n                dispatch(errorLogin(errorMessages.GENERAL_ERROR));\n              });\n            } catch (e) {}\n\n            return;\n        }\n      } // });\n\n    });\n  };\n}\nexport function validarToken(token) {\n  return function (dispatch) {\n    //dispatch(sendingRequest(true));\n    auth.validarToken(token, function (success, error) {\n      // When the request is finished, hide the loading indicator\n      //dispatch(sendingRequest(false));\n      if (success === true) {} else {\n        switch (error.status) {\n          case 401:\n            dispatch(errorLogin(errorMessages.UNAUTHORIZED_TOKEN));\n            dispatch(logout());\n            return;\n\n          default:\n            try {\n              error.json().then(function (error) {\n                if (error.message != \"\") dispatch(errorLogin(error.message));else dispatch(errorLogin(errorMessages.GENERAL_ERROR));\n              }).catch(function (error) {\n                dispatch(errorLogin(errorMessages.GENERAL_ERROR));\n              });\n            } catch (e) {}\n\n            return;\n        }\n      } // });\n\n    });\n  };\n}","map":{"version":3,"sources":["/home/mark/Workspace/QuieroIP/src/actions/AuthenticationActions.js"],"names":["auth","errorMessages","history","jwt_decode","REQUEST_LOGIN","RECEIVE_LOGIN","ERROR_LOGIN","CHANGE_LOGIN","CHANGE_USER","RESET_LOGIN","LOGOUT_SUCCESS","LOGOUT_REQUEST","login","usuario","dispatch","sendingRequest","anyElementsEmpty","errorLogin","success","error","receiveLogin","datos","localStorage","token","changeUser","nombreUsuario","changeLogin","password","push","status","UNAUTHORIZED_TOKEN","logout","json","then","message","GENERAL_ERROR","catch","e","requestLogout","type","isFetching","isAuthenticated","receiveLogout","removeItem","document","cookie","window","location","reload","sending","resetLogin","elements","element","olvideMiPassword","resetPassword","replace","validarToken"],"mappings":"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","sourcesContent":["import auth from \"../api/authentication\"\nimport * as errorMessages  from '../constants/MessageConstants';\nimport history from '../history';\nimport jwt_decode from 'jwt-decode';\n\n\n//LOGIN\nexport const REQUEST_LOGIN = 'REQUEST_LOGIN';\nexport const RECEIVE_LOGIN = 'RECEIVE_LOGIN';\nexport const ERROR_LOGIN= \"ERROR_LOGIN\";\nexport const CHANGE_LOGIN= \"CHANGE_LOGIN\";\nexport const CHANGE_USER= \"CHANGE_USER\";\nexport const RESET_LOGIN = 'RESET_LOGIN';\nexport const LOGOUT_SUCCESS = 'LOGOUT_SUCCESS';\nexport const LOGOUT_REQUEST = 'LOGOUT_REQUEST';\n\nexport function login(usuario) {\n    return (dispatch) => {\n        dispatch(sendingRequest(true));\n        // If no username or password was specified, throw a field-missing error\n        if (anyElementsEmpty(usuario)) {\n            dispatch(sendingRequest(false));\n            dispatch(errorLogin(\"Completa los campos\"));\n            return;\n        }\n        auth.login(usuario, (success, error) => {\n            // When the request is finished, hide the loading indicator\n            //dispatch(sendingRequest(false));\n\n            if (success === true) {\n                dispatch(receiveLogin(success));\n                //guardo usuario logueado\n                var datos = jwt_decode(localStorage.token);\n                dispatch(changeUser(datos.nombreUsuario));\n                // If the login worked, forward the user to the dashboard and clear the form\n                dispatch(changeLogin({\n                    nombreUsuario: \"\",\n                    password: \"\"\n                }));\n                history.push(\"/jugadores\");\n            } else {\n                switch (error.status) {\n                    case 401:\n                        dispatch(errorLogin(errorMessages.UNAUTHORIZED_TOKEN));\n                        dispatch(logout());\n                        return;\n                    default:\n                        try {\n                            error.json()\n                                .then((error) => {\n                                    if (error.message != \"\")\n                                        dispatch(errorLogin(error.message));\n                                    else\n                                        dispatch(errorLogin(errorMessages.GENERAL_ERROR));\n                                })\n                                .catch((error) => {\n                                    dispatch(errorLogin(errorMessages.GENERAL_ERROR));\n                                });\n                        }catch (e){}\n                        return;\n                }\n            }\n            // });\n        });\n    }\n}\n\nfunction requestLogout() {\n    return {\n        type: LOGOUT_REQUEST,\n        isFetching: true,\n        isAuthenticated: true,\n    };\n}\n\nexport function receiveLogout() {\n    return {\n        type: LOGOUT_SUCCESS,\n        isFetching: false,\n        isAuthenticated: false,\n    };\n}\n\nexport function logout() {\n    return (dispatch) => {\n        dispatch(requestLogout());\n        //dispatch(resetCreateUsuario());\n        //dispatch(resetUpdateUsuarioLogueado());\n        localStorage.removeItem('token');\n        document.cookie = 'id_token=;expires=Thu, 01 Jan 1970 00:00:01 GMT;';\n        dispatch(receiveLogout());\n        window.location.reload;\n\n\n    };\n}\n\n\nexport function sendingRequest(sending) {\n    return {type: REQUEST_LOGIN, sending};\n}\n\nexport function receiveLogin(token) {\n    return {type: RECEIVE_LOGIN, token};\n}\n\nexport function changeLogin(usuario) {\n    return {type: CHANGE_LOGIN, usuario: usuario};\n}\n\nexport function changeUser(nombreUsuario) {\n    return {type: CHANGE_USER, nombreUsuario: nombreUsuario};\n}\nexport function resetLogin() {\n    return {\n        type: RESET_LOGIN\n    }\n}\nfunction errorLogin(error) {\n    return {\n        type: ERROR_LOGIN,\n        error: error,\n    }\n}\n\nfunction anyElementsEmpty(elements) {\n    for (let element in elements) {\n        if (!elements[element]) {\n            return true;\n        }\n    }\n    return false;\n}\n\nexport function olvideMiPassword(usuario) {\n    return (dispatch) => {\n        dispatch(sendingRequest(true));\n        // If no username or password was specified, throw a field-missing error\n        if (usuario==\"\") {\n            dispatch(sendingRequest(false));\n            dispatch(errorLogin(\"Debe ingresar su usuario para iniciar el proceso de recuperación.\"));\n            return;\n        }\n        auth.olvideMiPassword(usuario, (success, error) => {\n            // When the request is finished, hide the loading indicator\n            if (success === true) {\n                dispatch(sendingRequest(false));\n            } else {\n                switch (error.status) {\n                    case 401:\n                        dispatch(errorLogin(errorMessages.UNAUTHORIZED_TOKEN));\n                        dispatch(logout());\n                        return;\n                    default:\n                        try {\n                            error.json()\n                                .then((error) => {\n                                    if (error.message != \"\")\n                                        dispatch(errorLogin(error.message));\n                                    else\n                                        dispatch(errorLogin(errorMessages.GENERAL_ERROR));\n                                })\n                                .catch((error) => {\n                                    dispatch(errorLogin(errorMessages.GENERAL_ERROR));\n                                });\n                        }catch (e){}\n                        return;\n                }\n            }\n            // });\n        });\n    }\n}\n\nexport function resetPassword(usuario) {\n    return (dispatch) => {\n        dispatch(sendingRequest(true));\n        auth.resetPassword(usuario, (success, error) => {\n            // When the request is finished, hide the loading indicator\n            dispatch(sendingRequest(false));\n            if (success === true) {\n                history.replace('/login', null);\n            } else {\n                switch (error.status) {\n                    case 401:\n                        dispatch(errorLogin(errorMessages.UNAUTHORIZED_TOKEN));\n                        dispatch(logout());\n                        return;\n                    default:\n                        try {\n                            error.json()\n                                .then((error) => {\n                                    if (error.message != \"\")\n                                        dispatch(errorLogin(error.message));\n                                    else\n                                        dispatch(errorLogin(errorMessages.GENERAL_ERROR));\n                                })\n                                .catch((error) => {\n                                    dispatch(errorLogin(errorMessages.GENERAL_ERROR));\n                                });\n                        }catch (e){}\n                        return;\n                }\n            }\n            // });\n        });\n    }\n}\n\nexport function validarToken(token) {\n    return (dispatch) => {\n        //dispatch(sendingRequest(true));\n        auth.validarToken(token, (success, error) => {\n            // When the request is finished, hide the loading indicator\n            //dispatch(sendingRequest(false));\n            if (success === true) {\n\n            } else {\n                switch (error.status) {\n                    case 401:\n                        dispatch(errorLogin(errorMessages.UNAUTHORIZED_TOKEN));\n                        dispatch(logout());\n                        return;\n                    default:\n                        try {\n                            error.json()\n                                .then((error) => {\n                                    if (error.message != \"\")\n                                        dispatch(errorLogin(error.message));\n                                    else\n                                        dispatch(errorLogin(errorMessages.GENERAL_ERROR));\n                                })\n                                .catch((error) => {\n                                    dispatch(errorLogin(errorMessages.GENERAL_ERROR));\n                                });\n                        }catch (e){}\n                        return;\n                }\n            }\n            // });\n        });\n    }\n}"]},"metadata":{},"sourceType":"module"}