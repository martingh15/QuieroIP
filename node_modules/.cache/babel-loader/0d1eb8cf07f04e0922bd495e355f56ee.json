{"ast":null,"code":"import usuario from \"../api/usuario\";\nimport history from \"../history\";\nimport * as errorMessages from '../constants/MessageConstants'; //Actions\n\nimport { logout } from \"../actions/AuthenticationActions\"; //USUARIO CREATE\n\nexport var CREATE_USUARIO = 'CREATE_USUARIO';\nexport var REQUEST_CREATE_USUARIO = \"REQUEST_CREATE_USUARIO\";\nexport var SUCCESS_CREATE_USUARIO = \"SUCCESS_CREATE_USUARIO\";\nexport var ERROR_CREATE_USUARIO = \"ERROR_CREATE_USUARIO\";\nexport var RESET_CREATE_USUARIO = \"RESET_CREATE_USUARIO\"; //USUARIOLOGUEADO UPDATE\n\nexport var UPDATE_USUARIOLOGUEADO = 'UPDATE_USUARIOLOGUEADO';\nexport var REQUEST_UPDATE_USUARIOLOGUEADO = \"REQUEST_UPDATE_USUARIOLOGUEADO\";\nexport var SUCCESS_UPDATE_USUARIOLOGUEADO = \"SUCCESS_UPDATE_USUARIOLOGUEADO\";\nexport var ERROR_UPDATE_USUARIOLOGUEADO = \"ERROR_UPDATE_USUARIOLOGUEADO\";\nexport var RESET_UPDATE_USUARIOLOGUEADO = \"RESET_UPDATE_USUARIOLOGUEADO\"; //CREATE\n\nfunction requestCreateUsuario() {\n  return {\n    type: REQUEST_CREATE_USUARIO\n  };\n}\n\nfunction receiveCreateUsuario() {\n  return {\n    type: SUCCESS_CREATE_USUARIO,\n    receivedAt: Date.now()\n  };\n}\n\nexport function errorCreateUsuario(error) {\n  return {\n    type: ERROR_CREATE_USUARIO,\n    error: error\n  };\n}\nexport function resetCreateUsuario(error) {\n  return {\n    type: RESET_CREATE_USUARIO\n  };\n}\nexport function createUsuario(usuario) {\n  return {\n    type: CREATE_USUARIO,\n    usuario: usuario\n  };\n}\n\nfunction saveCreateUsuario() {\n  return function (dispatch, getState) {\n    dispatch(requestCreateUsuario());\n    return usuario.saveCreate(getState().usuarios.byId.usuarioLogueado).then(function (response) {\n      if (response.status >= 400) {\n        return Promise.reject(response);\n      } else {\n        dispatch(receiveCreateUsuario());\n        return response.json();\n      }\n    }).then(function (usuario) {\n      dispatch(resetCreateUsuario());\n      history.push(\"/jugadores\");\n    }).catch(function (error) {\n      switch (error.status) {\n        case 401:\n          dispatch(errorCreateUsuario(errorMessages.UNAUTHORIZED_TOKEN));\n          dispatch(logout());\n          return;\n\n        default:\n          error.json().then(function (error) {\n            if (error.message != \"\") dispatch(errorCreateUsuario(error.message));else dispatch(errorCreateUsuario(errorMessages.GENERAL_ERROR));\n          }).catch(function (error) {\n            dispatch(errorCreateUsuario(errorMessages.GENERAL_ERROR));\n          });\n          return;\n      }\n    });\n  };\n} //UPDATE\n\n\nfunction requestUpdateUsuarioLogueado() {\n  return {\n    type: REQUEST_UPDATE_USUARIOLOGUEADO\n  };\n}\n\nfunction receiveUpdateUsuarioLogueado() {\n  return {\n    type: SUCCESS_UPDATE_USUARIOLOGUEADO,\n    receivedAt: Date.now()\n  };\n}\n\nfunction errorUpdateUsuarioLogueado(error) {\n  return {\n    type: ERROR_UPDATE_USUARIOLOGUEADO,\n    error: error\n  };\n}\n\nexport function resetUpdateUsuarioLogueado() {\n  //todo buscar usuario\n  return {\n    type: RESET_UPDATE_USUARIOLOGUEADO\n  };\n}\nexport function updateUsuarioLogueado(usuario) {\n  return {\n    type: UPDATE_USUARIOLOGUEADO,\n    usuario: usuario\n  };\n}\n\nfunction saveUpdateUsuarioLogueado() {\n  return function (dispatch, getState) {\n    dispatch(requestUpdateUsuarioLogueado());\n    return usuario.saveUpdate(getState().usuarios.byId.usuarioLogueado).then(function (response) {\n      if (response.status >= 400) {\n        return Promise.reject(response);\n      } else {\n        dispatch(receiveUpdateUsuarioLogueado());\n        return response.json();\n      }\n    }).catch(function (error) {\n      switch (error.status) {\n        case 401:\n          dispatch(errorUpdateUsuarioLogueado(errorMessages.UNAUTHORIZED_TOKEN));\n          dispatch(logout());\n          return;\n\n        default:\n          dispatch(errorUpdateUsuarioLogueado(errorMessages.GENERAL_ERROR));\n          return;\n      }\n    });\n  };\n}\n\nexport function saveUsuarioLogueado() {\n  return function (dispatch, getState) {\n    if (!getState().usuarios.byId.usuarioLogueado.id) dispatch(saveCreateUsuario());else dispatch(saveUpdateUsuarioLogueado());\n  };\n}\nexport function changeUsuarioLogueado(usuario) {\n  return function (dispatch, getState) {\n    //Decidir si actualizar o modificar\n    if (!getState().usuarios.byId.usuarioLogueado.id) dispatch(createUsuario(usuario));else dispatch(updateUsuarioLogueado(usuario));\n  };\n}","map":{"version":3,"sources":["/home/mark/Workspace/QuieroIP/src/actions/usuarioActions.js"],"names":["usuario","history","errorMessages","logout","CREATE_USUARIO","REQUEST_CREATE_USUARIO","SUCCESS_CREATE_USUARIO","ERROR_CREATE_USUARIO","RESET_CREATE_USUARIO","UPDATE_USUARIOLOGUEADO","REQUEST_UPDATE_USUARIOLOGUEADO","SUCCESS_UPDATE_USUARIOLOGUEADO","ERROR_UPDATE_USUARIOLOGUEADO","RESET_UPDATE_USUARIOLOGUEADO","requestCreateUsuario","type","receiveCreateUsuario","receivedAt","Date","now","errorCreateUsuario","error","resetCreateUsuario","createUsuario","saveCreateUsuario","dispatch","getState","saveCreate","usuarios","byId","usuarioLogueado","then","response","status","Promise","reject","json","push","catch","UNAUTHORIZED_TOKEN","message","GENERAL_ERROR","requestUpdateUsuarioLogueado","receiveUpdateUsuarioLogueado","errorUpdateUsuarioLogueado","resetUpdateUsuarioLogueado","updateUsuarioLogueado","saveUpdateUsuarioLogueado","saveUpdate","saveUsuarioLogueado","id","changeUsuarioLogueado"],"mappings":"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","sourcesContent":["import usuario from \"../api/usuario\";\nimport history from \"../history\";\nimport * as errorMessages from '../constants/MessageConstants';\n\n//Actions\nimport {logout} from \"../actions/AuthenticationActions\";\n\n\n\n//USUARIO CREATE\nexport const CREATE_USUARIO = 'CREATE_USUARIO';\nexport const REQUEST_CREATE_USUARIO = \"REQUEST_CREATE_USUARIO\";\nexport const SUCCESS_CREATE_USUARIO = \"SUCCESS_CREATE_USUARIO\";\nexport const ERROR_CREATE_USUARIO = \"ERROR_CREATE_USUARIO\";\nexport const RESET_CREATE_USUARIO = \"RESET_CREATE_USUARIO\";\n\n//USUARIOLOGUEADO UPDATE\nexport const UPDATE_USUARIOLOGUEADO = 'UPDATE_USUARIOLOGUEADO';\nexport const REQUEST_UPDATE_USUARIOLOGUEADO = \"REQUEST_UPDATE_USUARIOLOGUEADO\";\nexport const SUCCESS_UPDATE_USUARIOLOGUEADO = \"SUCCESS_UPDATE_USUARIOLOGUEADO\";\nexport const ERROR_UPDATE_USUARIOLOGUEADO = \"ERROR_UPDATE_USUARIOLOGUEADO\";\nexport const RESET_UPDATE_USUARIOLOGUEADO = \"RESET_UPDATE_USUARIOLOGUEADO\";\n\n//CREATE\nfunction requestCreateUsuario() {\n    return {\n        type: REQUEST_CREATE_USUARIO,\n    }\n}\n\nfunction receiveCreateUsuario() {\n    return {\n        type: SUCCESS_CREATE_USUARIO,\n        receivedAt: Date.now()\n    }\n}\n\nexport function errorCreateUsuario(error) {\n    return {\n        type: ERROR_CREATE_USUARIO,\n        error: error,\n    }\n}\n\nexport function resetCreateUsuario(error) {\n    return {\n        type: RESET_CREATE_USUARIO\n    }\n}\n\nexport function createUsuario(usuario) {\n    return {\n        type: CREATE_USUARIO,\n        usuario\n    }\n}\n\nfunction saveCreateUsuario() {\n    return (dispatch, getState) => {\n        dispatch(requestCreateUsuario());\n        return usuario.saveCreate(getState().usuarios.byId.usuarioLogueado)\n            .then(function (response) {\n                if (response.status >= 400) {\n                    return Promise.reject(response);\n                }\n                else {\n                    dispatch(receiveCreateUsuario());\n                    return response.json();\n                }\n            })\n            .then((usuario) => {\n                dispatch(resetCreateUsuario());\n                history.push(\"/jugadores\");\n            })\n            .catch(function (error) {\n                switch (error.status) {\n                    case 401:\n                        dispatch(errorCreateUsuario(errorMessages.UNAUTHORIZED_TOKEN));\n                        dispatch(logout());\n                        return;\n                    default:\n                        error.json()\n                            .then((error) => {\n                                if (error.message != \"\")\n                                    dispatch(errorCreateUsuario(error.message));\n                                else\n                                    dispatch(errorCreateUsuario(errorMessages.GENERAL_ERROR));\n                            })\n                            .catch((error) => {\n                                dispatch(errorCreateUsuario(errorMessages.GENERAL_ERROR));\n                            });\n                        return;\n                }\n            });\n    }\n}\n\n//UPDATE\nfunction requestUpdateUsuarioLogueado() {\n    return {\n        type: REQUEST_UPDATE_USUARIOLOGUEADO,\n    }\n}\n\nfunction receiveUpdateUsuarioLogueado() {\n    return {\n        type: SUCCESS_UPDATE_USUARIOLOGUEADO,\n        receivedAt: Date.now()\n    }\n}\n\nfunction errorUpdateUsuarioLogueado(error) {\n    return {\n        type: ERROR_UPDATE_USUARIOLOGUEADO,\n        error: error,\n    }\n}\n\nexport function resetUpdateUsuarioLogueado() {\n    //todo buscar usuario\n    return {\n        type: RESET_UPDATE_USUARIOLOGUEADO\n    }\n}\n\nexport function updateUsuarioLogueado(usuario) {\n    return {\n        type: UPDATE_USUARIOLOGUEADO,\n        usuario\n    }\n}\n\nfunction saveUpdateUsuarioLogueado() {\n    return (dispatch, getState) => {\n        dispatch(requestUpdateUsuarioLogueado());\n\n        return usuario.saveUpdate(getState().usuarios.byId.usuarioLogueado)\n            .then(function (response) {\n                if (response.status >= 400) {\n                    return Promise.reject(response);\n                }\n                else {\n                    dispatch(receiveUpdateUsuarioLogueado());\n                    return response.json();\n                }\n            })\n            .catch(function (error) {\n                switch (error.status) {\n                    case 401:\n                        dispatch(errorUpdateUsuarioLogueado(errorMessages.UNAUTHORIZED_TOKEN));\n                        dispatch(logout());\n                        return;\n                    default:\n                        dispatch(errorUpdateUsuarioLogueado(errorMessages.GENERAL_ERROR));\n                        return;\n                }\n            });\n    }\n}\n\nexport function saveUsuarioLogueado() {\n    return (dispatch, getState) => {\n        if (!getState().usuarios.byId.usuarioLogueado.id)\n            dispatch(saveCreateUsuario());\n        else\n            dispatch(saveUpdateUsuarioLogueado())\n\n    }\n}\n\n\nexport function changeUsuarioLogueado(usuario) {\n    return (dispatch, getState) => {\n        //Decidir si actualizar o modificar\n        if (!getState().usuarios.byId.usuarioLogueado.id)\n            dispatch(createUsuario(usuario));\n        else\n            dispatch(updateUsuarioLogueado(usuario));\n    }\n}"]},"metadata":{},"sourceType":"module"}